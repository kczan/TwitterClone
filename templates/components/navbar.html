{% load static %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top mb-3">
  <a class="navbar-brand" href="#"
    ><img src="{% static '/media/twittur_light_narrow.png' %}" alt="logo"
  /></a>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto w-75">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="#">Trending</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="/global">Global</a>
      </li>
      <li>
        <form
          class="form-inline my-2 my-lg-0 pl-3"
          action=""
          id="user-search-form"
          onsubmit="userSearch()"
        >
          <input
            class="form-control mr-sm-2 nav-item"
            type="search"
            placeholder="Find users"
            aria-label="Search"
            id="user-search-input"
            required
          />

          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
            Search
          </button>
        </form>
      </li>
    </ul>
    {% if request.user.is_authenticated %}
    <span>
      <a href="/update-profile"
        ><i class="fa fa-user-cog pr-3 fa-lg text-light"></i
      ></a>
      <a class="btn btn-light" href="/profile/{{request.user.username}}"
        >{{ request.user.username }}</a
      ></span
    >

    <span class="px-2">
      <a class="btn btn-outline-info" href="/logout">Logout</a>
      {% else %}
      <a class="btn btn-outline-info mx-1" href="/login">Sign in</a>
      <a class="btn btn-outline-info mx-1" href="/register">Register</a>

      {% endif %}
    </span>
  </div>
</nav>

<script>
  const userSearch = () => {
    let formElement = document.getElementById("user-search-form");
    let actionSrc = `/search/${
      document.getElementById("user-search-input").value
    }`;

    formElement.action = actionSrc;
  };
</script>
